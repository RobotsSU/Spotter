<html> 
<script>
// Copyright 2010 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview HTML page for viewing the video feed from the Remote Eyes app.
 * The video feed is actually just a series of jpgs; it looks like video
 * because the JavaScript is constantly refreshing the image.
 *
 * Replace all instances of http://myexampleserver.com/dropbox/ with
 * your actual server where you are storing the images uploaded by Remote Eyes.
 *
 * @author clchen@google.com (Charles L. Chen)
 */

var cameraImage; 
var imgBase="image.jpg?" 
var c = 0;
var refresh = 50;
function count() 
{ 
 cameraImage.src=imgBase+(++c); 
} 
function init() 
{ 
 cameraImage = document.getElementById("cellbot"); 
 if( cameraImage ) 
 {  
  if (document.location.search && document.location.search.length > 0){
    // Should actually do some validation here...
    var refreshStr = document.location.search.replace("?", "");
    refresh = refreshStr;
  }
 
  // 50 is a pretty good interval. Too short, and the page is constantly
  // loading and doesn't show anything. Too long, and the video is choppy.
  setInterval("count()", refresh); 
 }
} 

window.onload = init; 
</script> 
<body> 
<div style="float:left;">
<p>Cellbot Vision</p> 
<img src="image.jpg?" id="cellbot">
</div> 
<div style="float:right;">
<!--- This is the standard Google Talk Gadget for web pages --->
<script src="http://www.gmodules.com/ig/ifr?url=http://hosting.gmodules.com/ig/gadgets/file/102561716148301006345/googletalk.xml&amp;synd=open&amp;w=320&amp;h=550&amp;title=&amp;border=%23ffffff%7C0px%2C1px+solid+%23004488%7C0px%2C1px+solid+%23005599%7C0px%2C1px+solid+%230077BB%7C0px%2C1px+solid+%230088CC&amp;output=js"></script>
</div> 


</body> 
</html>  